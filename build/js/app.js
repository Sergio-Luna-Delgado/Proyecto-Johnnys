function Tabla(a,o){$("#"+a).DataTable({processing:!0,serverSide:!0,order:[],ajax:{url:"/includes/functions/"+o,type:"POST"},columnsDefs:[{targets:[0,3,4],orderable:!1}],language:{decimal:"",emptyTable:"No hay registros",info:"Mostrando _START_ a _END_ de _TOTAL_ Entradas",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total entradas)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Entradas",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}}})}function cartas(a,o){document.querySelector(".contenedorPrimario")&&$.ajax({url:"includes/functions/"+a,type:"POST",data:{categoria:categoria},success:function(a){a&&(a=JSON.parse(a),card_container=document.querySelector("#"+o),a.forEach(a=>{card=`<div class="col-12 col-sm-6 col-lg-4 mb-5">\n                                <div class="card carta-width">\n                                    <img src="pictures/${a.foto}" class="card-img-top carta-height">\n                                    <div class="card-body">\n                                        <h3 class="card-title fw-bold">${a.nombre_producto}</h3>\n                                        <p class="card-text text-danger fs-3">$ ${a.precio_unitario}</p>\n                                        <div align="center"><button type="button" onclick="validarComprar(${a.id_producto})" class="btn btn-warning py-2 px-4 fs-3" id="btnDetalles">Comprar</button></div>\n                                    </div>\n                                </div>\n                                <div class="modal fade" id="detalles${a.id_producto}" tabindex="-1" aria-labelledby="detalles_label" aria-hidden="true">\n                                    <div class="modal-dialog">\n                                        <div class="modal-content">\n                                            <div class="modal-header">\n                                                <h1 class="modal-title fs-1 fw-bold" id="detalles_label">${a.nombre_producto}</h1>\n                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                                            </div>\n                                            <div class="modal-body">\n                                                <form method="POST" id="formulario_subpedido" class="login" enctype="multipart/form-data">\n                                                    <img src="pictures/${a.foto}" class="card-img-top">\n                                                    <label class="text-dark fs-2 my-3">${a.descripcion}</label>\n                                                    <label class="text-danger fs-2 my-2 d-block">$${a.precio_unitario}</label>\n                                                    <label for="Cantidad${a.id_producto}" class="text-dark fs-2 me-2">Seleccione la cantidad:</label>\n                                                    <input type="number" name="Cantidad${a.id_producto}" id="Cantidad${a.id_producto}" class="input_numero" value="1" min="1" max="100"><br>\n                                                    <div align="center">\n                                                        <input type="hidden" name="id_producto" id="id_Producto" value="${a.id_producto}">\n                                                        <input type="button" onclick="carrito(${a.id_producto},1)" name="btn1" id="${a.id_producto}" class="btn btn-warning py-2 px-5 fs-2 my-4 w-75" value="Agregar Carrito"><br>\n                                                        <input type="button" name="btn2" onclick="carrito(${a.id_producto},2)" id="${a.id_producto}" class="btn btn-success py-2 px-4 fs-2 w-50" value="Comprar Ya"><br>\n                                                    </div>\n                                                </form>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>`,card_container.innerHTML+=card}))}})}function validarComprar(a){$.ajax({url:"/includes/functions/validarUsuario.php",method:"POST",success:function(o){"error"==(o=JSON.parse(o)).status?(alert(o.message),window.location.href="/login.php"):$("#detalles"+a).modal("show")},error:function(a,o,r){alert(o+r)}})}function carrito(a,o){let r=document.querySelector("#Cantidad"+a).value;$.ajax({url:"/includes/functions/carrito.php",method:"POST",data:{id:a,cantidad:r},success:function(r){"success"==(r=JSON.parse(r)).status?(alert(r.message),"Ninguna"!=r.promotion&&alert("Tiene una promocion del "+r.promotion),1==o?$("#detalles"+a).modal("hide"):window.location.href="/carrito.php"):alert(r.message)},error:function(a,o,r){alert(o+r)}})}$(document).ready((function(){$("#aviso_administrador").modal("show"),Tabla("datos_ordenes","obtener_ordenes.php"),Tabla("datos_auditar","obtener_auditar.php"),$("#Crear").click((function(){$("#formulario_producto")[0].reset(),$("#action").val("Crear"),$("#Operacion").val("Crear"),$("#Foto_Subida").html("")})),Tabla("datos_productos","obtener_productos.php"),cartas("productosPrimario.php","card-container"),cartas("productosSecundario.php","card-container-2"),Tabla("datos_carrito","obtener_carrito.php"),Tabla("datos_pedidos","obtener_pedidos.php")})),$(document).on("submit","#login_admin",(function(a){a.preventDefault();const o=$("#email").val(),r=$("#contraseña").val();$.ajax({url:"/includes/functions/login_validate.php",type:"POST",data:{correo:o,"contraseña":r,rol:"administradores"},success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),window.location.href="/admin/propiedades/ordenes.php"):(alert(a.message),$("#contraseña").val(""))},error:function(a,o){alert(a+o)}})})),$(document).on("submit","#formulario_producto",(function(a){a.preventDefault();$(".img-thumnail").val();let o=$("#foto").val().split(".").pop().toLowerCase();if(""!=o&&-1==jQuery.inArray(o,["gif","png","jpg","jpeg"]))return $("#foto").val(""),alert("Formato de imagen invalido"),!1;$.ajax({url:"/includes/functions/producto.php",type:"POST",data:new FormData(this),contentType:!1,processData:!1,success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),$("#formulario_producto")[0].reset(),$("#ingresar_producto").modal("hide"),location.reload()):alert(a.message)},error:function(a,o){alert(a+o)}})})),$(document).on("click",".editarProducto",(function(){let a=$(this).attr("id");$.ajax({url:"/includes/functions/obtener_un_producto.php",method:"POST",data:{id_producto:a},dataType:"json",success:function(o){$("#ingresar_producto").modal("show"),$("#nombre_producto").val(o.nombre_producto),$("#categoria").val(o.categoria),$("#descripcion").val(o.descripcion),$("#precio_unitario").val(o.precio_unitario),$("#inventario").val(o.inventario),$("#promocion").val(o.promocion),$("#Foto_Subida").html(o.foto),$(".modal-title").text("Editar Producto"),$("#id_producto").val(a),$("#action").val("Actualizar"),$("#Operacion").val("Editar")},error:function(a,o,r){alert(o+r)}})})),$(document).on("click",".borrarProducto",(function(){let a=$(this).attr("id");if(!confirm("Esta seguro de borrar este producto: "+a))return!1;$.ajax({url:"/includes/functions/producto.php",method:"POST",data:{id_producto:a,Operacion:"Borrar"},success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),location.reload()):alert(a.message)},error:function(a,o,r){alert(o+r)}})})),$(document).on("submit","#login_usuario",(function(a){a.preventDefault();const o=$("#correo").val(),r=$("#password").val();$.ajax({url:"/includes/functions/login_validate.php",type:"POST",data:{correo:o,"contraseña":r,rol:"usuarios"},success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),window.location.href="/"):(alert(a.message),$("#password").val(""))},error:function(a,o){alert(a+o)}})})),$(document).on("submit","#crear_usuario",(function(a){a.preventDefault(),$.ajax({url:"/includes/functions/crear_user.php",type:"POST",data:new FormData(this),contentType:!1,processData:!1,success:function(a){"success"==(a=JSON.parse(a)).status?(alert("Tu cuenta se ha creado exitosamente, por favor inicia sesión llenando tu nombre de usuario y tu contraseña."),$("#ingresar_usuario").modal("hide"),$("#nombre_usuario").val(""),$("#apellido_usuario").val(""),$("#correo_user").val(""),$("#direccion").val(""),$("#contraseña_user").val("")):"warning"==a.status?(alert(a.message),$("#correo_user").val(""),$("#contraseña_user").val("")):(alert(a.message),$("#ingresar_usuario").modal("hide"))},error:function(a,o){alert(a+o)}})})),$(document).on("submit","#actulizarContra",(function(a){a.preventDefault();const o=$("#contraseña1").val(),r=$("#contraseña2").val(),t=$("#id").val();o===r?$.ajax({url:"/includes/functions/actualizarContra.php",type:"POST",data:{contra:o,id:t},success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),window.location.href="/"):(alert(a.message),$("#cambiarContraseña").modal("hide"))},error:function(a,o){alert(a+o)}}):(alert("La contraseña NO coincide"),$("#contraseña2").val(""))})),$(document).on("click",".borrarArticulo",(function(){let a=$(this).attr("id");if(!confirm("¿Esta seguro de borrar este articulo?"))return!1;$.ajax({url:"/includes/functions/borrar_carrito.php",method:"POST",data:{id:a},success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),window.location.href="/carrito.php"):alert(a.message)}})})),$(document).on("click",".borrarOrden",(function(){let a=$(this).attr("id");if(!confirm("Deseas completar este registro: "+a))return!1;$.ajax({url:"/includes/functions/borrar_orden.php",method:"POST",data:{id:a},success:function(a){"success"==(a=JSON.parse(a)).status?(alert(a.message),location.reload()):alert(a.message)},error:function(a,o,r){alert(o+r)}})}));
//# sourceMappingURL=app.js.map
